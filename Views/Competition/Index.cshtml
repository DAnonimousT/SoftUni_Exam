@model IEnumerable<SoftUni_Exam.ViewModels.Competition.IndexCompetitionsViewModel>

@{
    ViewData["Title"] = "All Competitions";
}

<div class="container py-4">
    @if (!Model.Any())
    {
        <div class="alert alert-info text-center">
            <h5 class="mb-1">No competitions available</h5>
            <p class="mb-0 text-muted">Check back later for upcoming competitions.</p>
        </div>
    }
    else
    {
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            @foreach (var item in Model)
            {
                var isActive = item.StartDate <= DateTime.UtcNow && item.EndDate >= DateTime.UtcNow;
                var isUpcoming = item.StartDate > DateTime.UtcNow;
                var statusBadge = isActive ? "bg-success" : isUpcoming ? "bg-warning text-dark" : "bg-secondary";
                var statusText = isActive ? "Active" : isUpcoming ? "Upcoming" : "Ended";

                <div class="col">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body d-flex flex-column">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="card-title mb-0">@item.Name</h5>
                                <span class="badge @statusBadge ms-2">@statusText</span>
                            </div>

                            <p class="card-text text-muted flex-grow-1">
                                @(item.Description.Length > 150
                                    ? item.Description.Substring(0, 150) + "..."
                                    : item.Description)
                            </p>

                            <div class="mb-3">
                                <div class="d-flex align-items-center text-muted small mb-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor"
                                         class="bi bi-calendar-event me-2" viewBox="0 0 16 16">
                                        <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 
                                                 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 
                                                 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 
                                                 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 
                                                 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 
                                                 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 
                                                 1-1V4H1z"/>
                                    </svg>
                                    <span>
                                        @item.StartDate.ToString("dd MMM yyyy")
                                        &ndash;
                                        @item.EndDate.ToString("dd MMM yyyy")
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>